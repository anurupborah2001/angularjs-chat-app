<div class="main-div" ng-controller="MainCtrl">
<h4>Welcome {{data.username}} , click to select a channel below [<a href="#/join">Sign Out</a>]{{ channels.length | number }}</h4>
<ul class="lits-unstyled list-inline">
    <li class="roomlabel" ng-repeat="channel in channels track by $index">
        <a class="btn btn-info" href='' ng-class="{'label-default' : user != data.username,'label-default' : (channel != selectedChannel),'label-success':(channel == selectedChannel)}" ng-click="subscribe(channel)"> 
            <i class="fa" ng-class="{'fa-spin' :(channel == selectedChannel),'fa-spinner' :(channel == selectedChannel), 'fa-comments' :(channel != selectedChannel)}"></i>
            {{ channel }}
        </a>
    </li>
    <li class="roomlabel">
           <a class="btn btn-default" ng-click="showCreate = !showCreate">
            <i class="fa fa-magic">Create New</i>
        </a>
    </li>
</ul>
<div ng-show="showCreate"> 
    <form ng-submit="createChannel()">
        <h4>Create New Room</h4>
        <div class="input-group">
            <input type="text" class="input-sm form-control" ng-model="newChannel" placeholder="Room Name"/>
            <span class="input-group-btn">
                <input type="submit" class="input-sm btn bn-default" value="Go" />
            </span>
        </div>
    </form>
</div>
<br/>
<div class="row">
    <div class="col-md-2">
        <small class="marker">User in Room</small>
        <ul class="list-unstyled">
            <li ng-repeat="user in users track by $index">
                <span class="label btn-mini userlabel" ng-class="{'label-default' : user != data.username, 'label-success' : (user===data.username)}" title='(Location : {{ userData[user].city || "unknown"}})'></span>
                <i class="fa fa-user"></i>
                {{user}}
            </li>
        </ul>
    </div>
    <div class="col-md-10">
        <form ng-submit="publish()">
        <div class="input-group">
            <input type="text" class="input-sm form-control" ng-model="newMessage" placeholder="Type a Message..."/>
            <span class="input-group-btn">
                <input type="submit" class="input-sm btn bn-default" value="Send" />
            </span>
        </div>
    </form>
        <br/>
        <div class="well chatbox" id="chat_history">
            <li ng-repeat="message in messages track by $index">
                <i class="fa fa-comment">
                    {{message}}
                </i>
            </li>
        </div>
            
    </div>
</div>
</div>